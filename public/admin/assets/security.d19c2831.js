import{u as S,a7 as a,r as w,bs as y,a as P,j as r,aa as c,a8 as x,B as b,M as m}from"./index.0da6c6af.js";import{S as v}from"./index.7d0d6145.js";import{l as C}from"./index.4c48b631.js";import{c as I}from"./index.21bb3508.js";function z({userInfo:g={},loading:l}){const e=S(C),[i]=a.useForm(),[h,u]=w.exports.useState(!1),{lang:p}=w.exports.useContext(y),f=async()=>{i.validate().then(async s=>{u(!0);const{password:t,oldPassword:o}=s,n=await I({uuid:g.list[0].uuid,password:t,oldPassword:o});n.data.code===0?m.success(n.data.message):m.error(n.data.message)}).catch(s=>{console.log(s)}).finally(()=>{u(!1)})},d=(s=1)=>r(v,{text:{rows:s,width:new Array(s).fill("100%")},animation:!0});return P(a,{style:{width:"500px",marginTop:"6px"},form:i,labelCol:{span:p==="en-US"?8:6},wrapperCol:{span:p==="en-US"?16:18},children:[r(a.Item,{label:e["securitySetting.oldPassword"],field:"oldPassword",rules:[{required:!0,message:e["securitySetting.oldPassword.placeholder"]}],children:l?d:r(c.Password,{placeholder:e["securitySetting.oldPassword.placeholder"]})}),r(a.Item,{label:e["securitySetting.newPassword"],field:"password",rules:[{required:!0,message:e["securitySetting.newPassword.placeholder"]},{validator(s,t){/^(?:(?=.*[a-z])(?=.*[A-Z])(?=.*\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])|(?=.*[a-z])(?=.*\d)(?=.*[@#$%^&+=])|(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&+=])).{6,18}$/.test(s)||t(e["securitySetting.newPassword.error"])}}],children:l?d:r(c.Password,{placeholder:e["securitySetting.newPassword.placeholder"]})}),r(a.Item,{label:e["securitySetting.confirmPassword"],field:"repeat_pwd",rules:[{required:!0,message:e["securitySetting.confirmPassword.placeholder"]},{validator(s,t){const o=i.getFieldValue("password");s!==o&&t(e["securitySetting.confirmPassword.error"])}}],children:l?d:r(c.Password,{placeholder:e["securitySetting.confirmPassword.placeholder"]})}),r(a.Item,{label:" ",children:r(x,{children:r(b,{loading:h,type:"primary",onClick:f,children:e["userSetting.save"]})})})]})}export{z as default};
