import{R as M,r as o,p as N,j as e,_ as T,a6 as h,ab as S,ac as w,a as c,F as y,a8 as G,bu as R,B as $,M as E}from"./index.30acaf99.js";import{C as A}from"./index.8c0331f1.js";import{P as z}from"./index.a796e206.js";function v(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,r)}return n}function O(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?v(Object(n),!0).forEach(function(r){T(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y(t,s){var n=o.exports.useContext(N),r=n.prefixCls,l=r===void 0?"arco":r,f=t.spin,p=t.className,u=O(O({"aria-hidden":!0,focusable:!1,ref:s},t),{},{className:"".concat(p?p+" ":"").concat(l,"-icon ").concat(l,"-icon-code")});return f&&(u.className="".concat(u.className," ").concat(l,"-icon-loading")),delete u.spin,delete u.isIcon,e("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...u,children:e("path",{d:"M16.734 12.686 5.42 24l11.314 11.314m14.521-22.628L42.57 24 31.255 35.314M27.2 6.28l-6.251 35.453"})})}var b=M.forwardRef(Y);b.defaultProps={isIcon:!0};b.displayName="IconCode";var q=b;function K(t){return h({url:"/database/table/query",method:"post",data:t})}function W(t){return h({url:"/scaffold/entity",method:"post",data:t})}function H(t){return h({url:"/scaffold/model",method:"post",data:t})}function J(t){return h({url:"/scaffold/service",method:"post",data:t})}const Q=S.Option,U=w.Group,V=["\u5B9E\u4F53","\u6A21\u578B","\u670D\u52A1"],X={\u5B9E\u4F53:W,\u6A21\u578B:H,\u670D\u52A1:J};function ae(){const[t,s]=o.exports.useState([]),[n,r]=o.exports.useState([]),[l,f]=o.exports.useState(!1),[p,u]=o.exports.useState(!1),[x,D]=o.exports.useState(""),[B,P]=o.exports.useState("false"),[g,j]=o.exports.useState([]),[I,m]=o.exports.useState(0),L=()=>{f(!0),K({}).then(a=>{const i=a.data.tables;r(i||[]),f(!1)})};o.exports.useEffect(()=>{L()},[]);const _=async()=>{if(s([]),m(0),x===""||x===void 0)return E.error("\u8BF7\u9009\u62E9\u6570\u636E\u8868"),!1;if(g.length===0)return E.error("\u8BF7\u9009\u62E9\u8981\u751F\u6210\u7684\u6587\u4EF6"),!1;u(!0);let a=0;const i=g.length,C=[];for(const F of g){a++;const k=X[F];try{const d=await k({table:x,overwrite:B});d&&d.data&&d.data.message&&C.push(d.data.message),m(Math.round(a/i*100)),s(C)}catch(d){console.error(`\u521B\u5EFA${F}\u63A5\u53E3\u8BF7\u6C42\u51FA\u9519\uFF1A`,d)}}};return c(y,{children:[e(A,{children:e(G,{children:e(S,{prefix:"\u6570\u636E\u8868",showSearch:!0,allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u8868",style:{width:"300px"},loading:l,onChange:a=>{D(a),m(0),u(!1),s([])},children:n.map(a=>e(Q,{value:a.slice(2),children:a.slice(2)},a.slice(2)))},"tableName")})}),c(A,{style:{marginTop:"20px",paddingLeft:"10px"},children:[e("span",{children:"\u751F\u6210\u7C7B\u578B"}),"\xA0\xA0",e(U,{options:V,onChange:a=>{j(a)}}),e("br",{}),e("br",{}),e("span",{children:"\u6587\u4EF6\u91CD\u5199"}),"\xA0\xA0",e(w,{onChange:a=>{P(a.toString())}}),e("br",{}),c("span",{style:{fontSize:"10px",marginLeft:"70px"},children:[e(R,{}),"\u6CE8:\u9009\u62E9\u6587\u4EF6\u91CD\u5199,\u4F1A\u8986\u76D6\u5DF2\u751F\u6210\u6587\u4EF6"]}),p?c(y,{children:[e("br",{}),e("span",{children:"\u751F\u6210\u8FDB\u5EA6"}),"\xA0\xA0"," ",e(z,{steps:5,size:"small",percent:I})," ",e("br",{})]}):"",e("br",{}),c("div",{style:{display:"flex"},children:[e("span",{children:"\u751F\u6210\u65E5\u5FD7"}),"\xA0\xA0",e("ol",{style:{height:"20vh",width:"35vw",overflow:"auto",backgroundColor:"#f5f5f5",padding:"0",margin:"5px"},children:t.map((a,i)=>c("li",{style:{listStyle:"none"},children:[c("span",{children:["\xA0",i+1,"\xA0\xA0\xA0\xA0"]}),a]},i))})]}),e("br",{}),c($,{style:{marginLeft:"4.3%"},type:"primary",onClick:_,children:[e(q,{}),"\u751F\u6210"]},"generateBtn")]})]})}export{ae as default};
