import{a6 as c,r as l,a7 as u,u as O,a as g,j as t,a8 as k,B as y,a9 as U,aa as F,ab as V,ac as M,M as n}from"./index.04bb8c9b.js";import{C as R}from"./index.05c926d0.js";import{T as z}from"./index.e1bbba76.js";import{P as W}from"./index.9e4654b1.js";import{getColumns as H}from"./constants.2113a786.js";import{U as J}from"./index.0312c154.js";import"./b-tween.es.064e2a03.js";import"./index.1d06ffcc.js";import"./index.5833a6ae.js";import"./index.ed7524b9.js";import"./index.16677384.js";const K={"en-US":{"menu.list":"List Page","menu.list.searchTable":"Search Table","searchTable.form.search":"Search","searchTable.form.reset":"Reset","searchTable.columns.id":"ID","searchTable.columns.title":"Title","searchTable.columns.description":"Description","searchTable.columns.carousel":"Carousel","searchTable.columns.link":"Link","searchTable.columns.target":"Target","searchTable.columns.status":"Status","searchTable.columns.status.enable":"Enable","searchTable.columns.status.disable":"Disable","searchTable.columns.operations":"Operations","searchTable.columns.operations.delete":"Delete","searchTable.columns.operations.delete.tip":"Are you sure you want to delete?","searchTable.columns.operations.confirm":"Confirm","searchTable.columns.operations.add":"Create","searchTable.columns.operations.update":"Edit","searchTable.operations.add":"Create","searchTable.operations.reload":"Refresh","searchForm.all.placeholder":"All","drawer.title.edit":"Edit","drawer.title.add":"Create","form.submitSuccess":"Submit Success","form.button.text":"Save","form.title":"Carousel Title","form.description":"Carousel Description","form.link":"Link","form.link.placeholder":"Please enter the link","form.target":"Target","form.sort":"Sort","form.status":"Enable","form.image.required":"Please upload an image"},"zh-CN":{"menu.list":"\u5217\u8868\u9875","menu.list.searchTable":"\u67E5\u8BE2\u8868\u683C","searchTable.form.search":"\u67E5\u8BE2","searchTable.form.reset":"\u91CD\u7F6E","searchTable.columns.id":"ID","searchTable.columns.title":"\u6807\u9898","searchTable.columns.description":"\u63CF\u8FF0","searchTable.columns.carousel":"\u8F6E\u64AD\u56FE","searchTable.columns.link":"\u8DF3\u8F6C\u94FE\u63A5","searchTable.columns.target":"\u8DF3\u8F6C\u65B9\u5F0F","searchTable.columns.status":"\u542F\u7528\u72B6\u6001","searchTable.columns.status.enable":"\u542F\u7528","searchTable.columns.status.disable":"\u7981\u7528","searchTable.columns.operations":"\u64CD\u4F5C","searchTable.columns.operations.delete":"\u5220\u9664","searchTable.columns.operations.delete.tip":"\u4F60\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F","searchTable.columns.operations.confirm":"\u786E\u8BA4","searchTable.columns.operations.add":"\u521B\u5EFA","searchTable.columns.operations.update":"\u7F16\u8F91","searchTable.operations.add":"\u65B0\u5EFA","searchTable.operations.reload":"\u5237\u65B0","searchForm.all.placeholder":"\u5168\u90E8","drawer.title.edit":"\u7F16\u8F91","drawer.title.add":"\u521B\u5EFA","form.submitSuccess":"\u63D0\u4EA4\u6210\u529F","form.button.text":"\u4FDD\u5B58","form.title":"\u8F6E\u64AD\u56FE\u6807\u9898","form.description":"\u8F6E\u64AD\u56FE\u63CF\u8FF0","form.link":"\u8DF3\u8F6C\u94FE\u63A5","form.link.placeholder":"\u8BF7\u586B\u5199\u8DF3\u8F6C\u94FE\u63A5","form.target":"\u8DF3\u8F6C\u65B9\u5F0F","form.sort":"\u6392\u5E8F","form.status":"\u542F\u7528","form.image.required":"\u8BF7\u4E0A\u4F20\u56FE\u7247"}},G="_carouselCreate_ukys5_1",Q="_toolbar_ukys5_28",X="_operations_ukys5_33",Y="_gender_ukys5_43",Z="_wrapper_ukys5_50",$="_form_ukys5_56";var T={carouselCreate:G,toolbar:Q,operations:X,"content-type":"_content-type_ukys5_36",gender:Y,wrapper:Z,form:$,"form-extra":"_form-extra_ukys5_62","search-form-wrapper":"_search-form-wrapper_ukys5_75","right-button":"_right-button_ukys5_80","button-group":"_button-group_ukys5_89","search-form":"_search-form_ukys5_75"};function ee(){return c({url:"/carousel/query",method:"post"})}function ae(o){return c({url:"/carousel/create",method:"post",data:o})}function te(o){return c({url:"/carousel/delete",method:"post",data:o})}function se(o){return c({url:"/carousel/update",method:"post",data:o})}function re(o){return c({url:"/carousel/enable",method:"post",data:o})}function oe(o){return c({url:"/carousel/disable",method:"post",data:o})}function ue(){return c({url:"/link/target/query",method:"post"})}function Fe(){const[o,E]=l.exports.useState([]),[x,m]=l.exports.useState(!1),[D,p]=l.exports.useState(!1),[C,h]=l.exports.useState(""),[d]=u.useForm(),a=O(K),S=async(e,s)=>{if(s=="edit"){h(e.uuid);let r="";r=""+e.image,d.setFieldsValue({...e,status:e.status===1,sortIndex:e.sort_index||1,image:e.image?[{uid:e.id,url:r,response:{data:{name:e.image.replace("/media/image?n=",""),path:e.image}}}]:[]}),m(!0)}s=="changeStatus"&&(h(e.uuid),P(e.uuid,e.status)),s=="delete"&&v(e.uuid)},w=l.exports.useMemo(()=>H(a,S),[a]),[B,I]=l.exports.useState([]),[A,b]=l.exports.useState(!0);l.exports.useEffect(()=>{i(),L()},[]);function i(){b(!0),ee().then(e=>{const s=e.data.list;I(s),b(!1)})}function L(){ue().then(e=>{if(e.data.code===0){const s=[];for(const r in e.data.list)s.push({value:r,label:e.data.list[r]});E(s)}})}function v(e){b(!0),te({uuid:e}).then(s=>{s.data.code===0?i():n.error(s.data.message)})}function P(e,s){b(!0),s=="1"?oe({uuid:e}).then(r=>{r.data.code===0?i():n.error(r.data.message)}):re({uuid:e}).then(r=>{r.data.code===0?i():n.error(r.data.message)})}function N(e){const s=typeof e.sortIndex=="number"?e.sortIndex:1,r={...e,status:e.status?"true":"false",image:e.image&&e.image.length!==0?typeof e.image[0].response=="string"?JSON.parse(e.image[0].response).data.name:e.image[0].response.data.name:void 0,sortIndex:s};p(!0),C?se({uuid:C,...r}).then(f=>{f.data.code===0?(n.success(a["form.submitSuccess"]),i(),m(!1),_()):n.error(f.data.message),p(!1)}):ae({...r}).then(f=>{f.data.code===0?(n.success(a["form.submitSuccess"]),m(!1),i(),_()):n.error(f.data.message),p(!1)})}function _(){m(!1),p(!1),d.resetFields()}function q(){h(""),m(!0),d.setFieldValue("sortIndex","1")}const j={labelCol:{span:4},wrapperCol:{span:20}};return g("div",{children:[g(R,{children:[t(W,{children:g("div",{className:T["button-group"],children:[t(k,{children:t(y,{onClick:()=>{q()},type:"primary",children:a["searchTable.operations.add"]})}),t(k,{children:t(y,{onClick:()=>{i()},type:"primary",children:a["searchTable.operations.reload"]})})]})}),t(z,{rowKey:"id",loading:A,pagination:!1,columns:w,data:B})]}),t(U,{className:T.carouselCreate,width:580,title:C?a["drawer.title.edit"]:a["drawer.title.add"],visible:x,confirmLoading:D,okText:a["form.button.text"],onOk:()=>{d.validate().then(e=>{N(e)})},onCancel:()=>{h(""),m(!1),p(!1),d.resetFields()},children:g(u,{...j,form:d,children:[t(u.Item,{label:a["form.image"],field:"image",triggerPropName:"fileList",wrapperCol:{span:24},rules:[{required:!0,message:a["form.image.required"]}],children:t(J,{multiple:!0,imagePreview:!0,limit:1,action:"/api/upload/image",listType:"picture-card",isOSS:!1,className:T.upload,style:{width:"100%"},accept:"image/png,image/jpg,image/jpeg,image/gif,image/webp,image/bmp"})}),t(u.Item,{label:a["form.title"],field:"title",children:t(F,{placeholder:a["form.title"]})}),t(u.Item,{label:a["form.description"],field:"description",children:t(F.TextArea,{maxLength:200,showWordLimit:!0,autoSize:!0,style:{minHeight:64},placeholder:a["form.description"]})}),t(u.Item,{label:a["form.link"],field:"link",children:t(F,{placeholder:a["form.link.placeholder"]})}),t(u.Item,{label:a["form.target"],field:"target",initialValue:"_blank",children:t(V,{options:o})}),t(u.Item,{label:a["form.sort"],field:"sortIndex",wrapperCol:{span:4},children:t(F,{type:"number",className:T["arco-input"],placeholder:a["form.sort"]})}),t(u.Item,{label:a["form.status"],field:"status",triggerPropName:"checked",children:t(M,{})})]})})]})}export{Fe as default};
