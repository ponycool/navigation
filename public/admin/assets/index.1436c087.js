import{R as te,a2 as Me,r as O,a3 as me,H as ye,a4 as G,a5 as re,a6 as Ce,N as _e,a7 as Xe,a8 as Ze,a9 as De,aa as oe,ab as Fe,W as le,ac as je,ad as pe,j as S,F as ce,ae as Qe,af as Ye,c as X,a as se,ag as Ie,U as ae,ah as er,ai as rr,C as nr,g as tr,aj as ar,ak as ir,I as lr,e as ur,al as Ne,am as or,an as cr,Z as sr,X as dr}from"./index.42bb498c.js";var fr=function(e){var a=e.prefixCls,l=e.multiple,u=e.option,r=e.renderOption,t=e.selected,i=e.icons,n=u.disabled||l&&u.disableCheckbox;return te.createElement(te.Fragment,null,l?te.createElement(Me,{disabled:n,checked:u._checked,indeterminate:u._halfChecked,onChange:e.onMultipleChecked,value:u.value}):"",te.createElement("div",{className:a+"-list-item-label",onClick:u.disabled?void 0:e.onClickOption,onMouseEnter:e.onMouseEnter,onDoubleClick:n?void 0:e.onDoubleClickOption},r?r():u.label,u.isLeaf?t&&i.checked:u.loading?i.loading:i.next))},hr=fr;function vr(e){e===void 0&&(e=[]);var a=O.exports.useRef(e),l=function(u,r){r!==void 0?a.current[r]=u:a.current.push(u)};return[a.current,l]}var U=globalThis&&globalThis.__assign||function(){return U=Object.assign||function(e){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},U.apply(this,arguments)},Oe=globalThis&&globalThis.__read||function(e,a){var l=typeof Symbol=="function"&&e[Symbol.iterator];if(!l)return e;var u=l.call(e),r,t=[],i;try{for(;(a===void 0||a-- >0)&&!(r=u.next()).done;)t.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}return t},ue=globalThis&&globalThis.__spreadArray||function(e,a,l){if(l||arguments.length===2)for(var u=0,r=a.length,t;u<r;u++)(t||!(u in a))&&(t||(t=Array.prototype.slice.call(a,0,u)),t[u]=a[u]);return e.concat(t||Array.prototype.slice.call(a))},gr=function(){function e(a,l,u){var r=this;this.pathValue=[],this.pathLabel=[],this.config={},this._initNode=function(t,i){i===void 0&&(i=null);var n=r.config,d=n.showEmptyChildren,o=n.lazyload,h=U(U({},$e),r.config.fieldNames),V=t[h.children],R=Array.isArray(V)?d?!1:V.length===0:!0;o&&(h.isLeaf in t?R=!!t[h.isLeaf]:R=!1);var j=t[h.value],_=t[h.label],I=U(U({},t),{value:j,label:_,isLeaf:R,loading:!1,loaded:!1,disabled:i&&i.disabled||t[h.disabled],parent:i,pathValue:i?ue(ue([],Oe(i.pathValue),!1),[j],!1):[j],pathLabel:i?ue(ue([],Oe(i.pathLabel),!1),[_],!1):[_],_level:i?i._level+1:0,_checked:!1,_halfChecked:!1});r._data=U(U({},I),{parent:I.parent&&I.parent._data}),Object.keys(I).forEach(function(L){r[L]=I[L]}),V&&V.length&&(r.children=V.map(function(L,k){return new e(U(U({},L),{_index:k}),r.config,r)}),r._data.children=r.children.map(function(L){return L._data}))},this._isHalfChecked=function(){if(!r.children||r.children.length===0)return!1;var t=r.children.reduce(function(i,n){var d=n._halfChecked?.5:n._checked?1:0;return i+d},0);return t!==r.children.length&&t>0},this._setNodeChildrenChecked=function(t,i){!i&&r.disabled||r.children&&r.children.length&&(r.children.forEach(function(n){n.disabled?i&&n.setCheckedStateIgnoreDisabled(t):n.setCheckedState(t)}),r.updateHalfState(t))},this.getSelfChildrenValue=function(){var t=[],i=function(n,d){if(!d||!d.length){t.push(n);return}(d||[]).forEach(function(o){i(o.pathValue,o.children)})};return i(r.pathValue,r.children),t},this.updateHalfState=function(t){if(r._halfChecked=r._isHalfChecked(),r._halfChecked)r._checked=!1;else if(r.children&&r.children.length>0){var i=r.children.every(function(d){return d._checked});r._checked=i}else if(t&&r.config.lazyload&&!r.config.changeOnSelect){var n=r.isLeaf||r.loaded&&(!r.children||r.children.length===0);r._checked=n?t:!1}else r._checked=t},this.setCheckedProperty=function(t){if(t&&r.config.lazyload&&!r.config.changeOnSelect){var i=r.isLeaf||r.loaded&&(!r.children||r.children.length===0);if(!i)return}r._checked=t,r._halfChecked=!1},this.setCheckedState=function(t){var i=t?r._checked:!r._checked&&!r._halfChecked;if(!(r.disabled||i)&&(r.setCheckedProperty(t),!r.config.changeOnSelect)){r._setNodeChildrenChecked(t);for(var n=r.parent;n&&!n.disabled;)n.updateHalfState(t),n=n.parent}},this.setCheckedStateIgnoreDisabled=function(t){if(t!==Boolean(r._checked)&&(r.setCheckedProperty(t),!r.config.changeOnSelect)){r._setNodeChildrenChecked(t,!0);for(var i=r.parent;i;)i.updateHalfState(t),i=i.parent}},this.getPathNodes=function(){for(var t=[r],i=r.parent;i;)t.unshift(i),i=i.parent;return t},this.getChildren=function(){return r.children},this.setLoading=function(t){r.loading=t,(t||t===void 0)&&(r.loaded=!1),t===!1&&(r.loaded=!0)},this.config=l||{},this._initNode(a,u||null)}return e}(),pr=gr,ie=globalThis&&globalThis.__assign||function(){return ie=Object.assign||function(e){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ie.apply(this,arguments)},br=function(){function e(a,l,u){var r=this;this.nodes=[],this.flatNodes=[],this.config={},this._calcNodes=function(i,n){return i?i.map(function(d,o){return new pr(ie(ie({},d),{_index:o}),r.config,n)}):[]},this._updateFlatNodes=function(){var i=!r.config.changeOnSelect;r.flatNodes=[];var n=function(d){if(!!d){var o=d.isLeaf||r.config.lazyload&&d.loaded&&(!d.children||d.children.length===0);(!i||o)&&r.flatNodes.push(d),ye(d.children)&&d.children.forEach(function(h){n(h)})}};r.nodes.forEach(function(d){n(d)})},this.setNodeCheckedByValue=function(i){var n=he(i);r.flatNodes.forEach(function(d){var o=!1;r.config.showParent?d.pathValue.some(function(h,V,R){return Z(n,R.slice(0,V+1))})&&(o=!0):Z(n,d.pathValue)&&(o=!0),d.setCheckedStateIgnoreDisabled(o)})},this.appendOptionChildren=function(i,n){if(n&&i){var d=r._calcNodes(n,i);i.children=d,i.setLoading(!1),r._updateFlatNodes(),r.config.changeOnSelect||i._checked&&n.length>0&&i.setCheckedState(!1)}},this.findNodeByValue=function(i){var n=null;return!i||!i.length||r.flatNodes.some(function(d){me(d.pathValue,i)&&(n=d)}),n},this.searchNodeByLabel=function(i){if(!i)return r.flatNodes;var n=r.config.filterOption,d=G(n)?n:function(o,h){return re(h.label)&&h.label.indexOf(o)>-1};return r.flatNodes.filter(function(o){var h=o.getPathNodes();return h.some(function(V){return d(i,V._data)})})},this.getOptions=function(){return r.nodes},this.getCheckedNodes=function(){return r.config.showParent?r.getCheckedParentNodes():r.flatNodes.filter(function(i){return i._checked})},this.getCheckedParentNodes=function(){var i=new Set;return r.flatNodes.forEach(function(n){if(n._checked){var d=n.getPathNodes();d.some(function(o){if(o._checked)return i.has(o)||i.add(o),!0})}}),Array.from(i)},this.config=ie({},u);var t=Array.isArray(l)?l:[];this.nodes=this._calcNodes(a,null),this._updateFlatNodes(),this.setNodeCheckedByValue(t)}return e}(),mr=br,Q="__arco_cascader__",yr="parent",Cr="child",Ve={cascader:"cascader",select:"select"};function _r(e){return!e||ye(e)&&e.length===0}function He(e){return{showEmptyChildren:e.showEmptyChildren,changeOnSelect:e.changeOnSelect,lazyload:!!e.loadMore,fieldNames:e.fieldNames,filterOption:e.filterOption,showParent:e.mode==="multiple"&&!e.changeOnSelect&&e.checkedStrategy===yr}}function kr(e,a){var l=a?Array.isArray(a[0])?a:[a]:[];return new mr(e.options||[],l,He(e))}var he=function(e){var a=e||[],l=a.reduce(function(u,r){return u.add([].concat(r).join(Q)),u},new Set);return l},Z=function(e,a){var l=a||[];return e.has(l.join(Q))},wr=function(e,a){var l=a||[];return e.delete(l.join(Q))},ne=function(e,a,l){var u=[];if(e===void 0?u=[]:a?u=e:u=[e],l&&l.config.showParent){var r=l.getCheckedNodes(),t=he(r.map(function(d){return d.pathValue})),i=[],n={};return u.map(function(d){d.some(function(o,h,V){var R=V.slice(0,h+1),j=Z(t,R);return j&&!n[R.join(Q)]&&(i.push(R),n[R.join(Q)]=1),j})}),i}return u},Sr=function(e){var a=function(l){return Array.isArray(l)?l.every(function(u){return u._checked||u.disabled?!0:a(u.children)}):!1};return e._halfChecked&&a(e==null?void 0:e.children)},Be=function(e,a,l,u){var r=u&&Sr(l)?!1:u,t=a.getCheckedNodes().reduce(function(h,V){return h.add(V.pathValue.join(Q)),h},new Set);l.setCheckedState(r);var i=a.getCheckedNodes(),n=i.map(function(h){return h.pathValue}),d=he(n),o=new Set;return e.filter(function(h){if(!Z(t,h)||Z(d,h))return o.add(h.join(Q)),!0}).concat(n.filter(function(h){return!Z(o,h)}))},de=globalThis&&globalThis.__assign||function(){return de=Object.assign||function(e){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},de.apply(this,arguments)},xe=globalThis&&globalThis.__awaiter||function(e,a,l,u){function r(t){return t instanceof l?t:new l(function(i){i(t)})}return new(l||(l=Promise))(function(t,i){function n(h){try{o(u.next(h))}catch(V){i(V)}}function d(h){try{o(u.throw(h))}catch(V){i(V)}}function o(h){h.done?t(h.value):r(h.value).then(n,d)}o((u=u.apply(e,a||[])).next())})},Le=globalThis&&globalThis.__generator||function(e,a){var l={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},u,r,t,i;return i={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function n(o){return function(h){return d([o,h])}}function d(o){if(u)throw new TypeError("Generator is already executing.");for(;l;)try{if(u=1,r&&(t=o[0]&2?r.return:o[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,o[1])).done)return t;switch(r=0,t&&(o=[o[0]&2,t.value]),o[0]){case 0:case 1:t=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(t=l.trys,!(t=t.length>0&&t[t.length-1])&&(o[0]===6||o[0]===2)){l=0;continue}if(o[0]===3&&(!t||o[1]>t[0]&&o[1]<t[3])){l.label=o[1];break}if(o[0]===6&&l.label<t[1]){l.label=t[1],t=o;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(o);break}t[2]&&l.ops.pop(),l.trys.pop();continue}o=a.call(e,l)}catch(h){o=[6,h],r=0}finally{u=t=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ee=globalThis&&globalThis.__read||function(e,a){var l=typeof Symbol=="function"&&e[Symbol.iterator];if(!l)return e;var u=l.call(e),r,t=[],i;try{for(;(a===void 0||a-- >0)&&!(r=u.next()).done;)t.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}return t},Nr=function(e){for(var a=0;a<e.length;a++)if(!e[a].disabled)return e[a]},Pe=function(e){if(e&&e.disabled){for(var a=e;a.parent&&a.parent.disabled;)a=a.parent;return a}return e},Te=function(e,a){return e<0?a:e>a?0:e},Or=function(e){var a,l=Ee(vr(),2),u=l[0],r=l[1],t=Ce(),i=e.store,n=e.prefixCls,d=e.value,o=e.multiple,h=e.renderFooter,V=e.renderOption,R=e.showEmptyChildren,j=e.loadMore,_=e.renderEmpty,I=e.rtl,L=e.icons,k=Ee(O.exports.useState(i.findNodeByValue(d&&d[d.length-1])||null),2),C=k[0],W=k[1],b=i.getOptions(),B=function(c){e.onChange&&e.onChange(c)},$=function(c){return xe(void 0,void 0,void 0,function(){var g,v;return Le(this,function(y){switch(y.label){case 0:if(!(!c.isLeaf&&G(j)&&!c.children))return[3,5];c.setLoading(!0),t(),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,j(c.pathValue,c.pathValue.length)];case 2:return g=y.sent(),i.appendOptionChildren(c,g),i.setNodeCheckedByValue(e.value),[3,4];case 3:return v=y.sent(),console.error(v),[3,4];case 4:c.setLoading(!1),t(),y.label=5;case 5:return[2]}})})},p=function(c,g){return g===void 0&&(g=!0),xe(void 0,void 0,void 0,function(){return Le(this,function(v){return!c||c.disabled?[2]:(W(c),$(c),!o&&g&&(e.changeOnSelect||c.isLeaf)&&B([c.pathValue]),[2])})})},w=function(c,g){var v=Be(e.value,i,c,g);c===C&&t(),W(c),e.changeOnSelect||$(c),B(v)},T=O.exports.useCallback(function(c){var g;c===void 0&&(c=C);for(var v=c;v;)(g=u[v._level])===null||g===void 0||g.scrollTo({index:v._index,options:{block:"nearest"}}),v=v._level<1?null:v.parent},[C]),x=O.exports.useCallback(function(c){var g=c.keyCode||c.which,v;switch(g){case Fe.code:{c.preventDefault(),e.onEsc();break}case oe.code:case De.code:{if(!C)v=Nr(b);else for(var y=Pe(C),F=y.parent&&y.parent.children||b,M=g===oe.code?1:-1,f=Te(y._index+M,F.length-1);f!==y._index&&(v=F[f],v.disabled);)f=Te(f+M,F.length-1);return T(v),p(v,!1),c.preventDefault(),!1}case Ze.code:{if(C&&!C.disabled){var F=C.children||[];v=F[0]||C,p(v,!1)}return c.preventDefault(),!1}case Xe.code:{if(C){var y=Pe(C);v=y.parent||y}return p(v,!1),c.preventDefault(),!1}case _e.code:return C&&(o?w(C,!C._checked):p(C)),c.preventDefault(),!1}},[C]);le(function(){W(function(c){var g;if(c&&c.pathValue&&c.pathValue.length){var v=c.pathValue,y={children:b};v.map(function(F){var M=y.children||[],f=M.find(function(z){return z.value===F});f&&(y=f,g=f)})}return g})},[i]),O.exports.useEffect(function(){e.popupVisible&&b.length&&setTimeout(T)},[e.popupVisible]),O.exports.useEffect(function(){var c=e.getTriggerElement();if(!!c)return e.popupVisible?je(c,"keydown",x):pe(c,"keydown",x),function(){pe(c,"keydown",x)}},[e.popupVisible,x]);var H=function(){var c=[b],g=C?C.getPathNodes():[];return g.forEach(function(v){v&&v.children&&c.push(v.children)}),c}(),A=G(e.dropdownColumnRender)?e.dropdownColumnRender:function(c){return c};return!H.length||!(!((a=H[0])===null||a===void 0)&&a.length)?S(ce,{children:_()}):S(Qe,{component:te.Fragment,children:H.map(function(c,g){var v,y,F,M=h?h(g,C||null):null;return c.length===0&&!R?null:S(Ye,{timeout:{enter:300,exit:0},classNames:"cascaderSlide",onEnter:function(f){!f||(f.style.marginLeft="-"+f.scrollWidth+"px")},onEntering:function(f){!f||(f.style.marginLeft="0px")},onEntered:function(f){!f||(f.style.marginLeft="")},children:S("div",{className:X(n+"-list-column",(v={},v[n+"-list-column-virtual"]=e.virtualListProps&&e.virtualListProps.threshold!==null,v[n+"-list-column-rtl"]=I,v)),style:de({zIndex:H.length-g},e.dropdownMenuColumnStyle),children:A(se("div",{className:X(n+"-list-wrapper",(y={},y[n+"-list-wrapper-with-footer"]=M!==null,y)),children:[c.length===0?_&&_(e.virtualListProps?"100%":120):S(Ie,{...de({needFiller:!1,threshold:e.virtualListProps?100:null,data:c,isStaticItemHeight:!0,itemKey:"value"},ae(e.virtualListProps)?e.virtualListProps:{},{wrapper:"ul",role:"menu",ref:function(f){return r(f,g)},className:X(n+"-list",n+"-list-select",(F={},F[n+"-list-multiple"]=o,F[n+"-list-rtl"]=I,F))}),children:function(f){var z,q=!1;return C&&(q=C.pathValue[g]===f.value),S("li",{tabIndex:0,role:"menuitem","aria-haspopup":!f.isLeaf,"aria-expanded":q&&!f.isLeaf,"aria-disabled":f.disabled,title:re(f.label)?f.label:void 0,className:X(n+"-list-item",(z={},z[n+"-list-item-active"]=q,z[n+"-list-item-disabled"]=f.disabled,z)),children:S(hr,{prefixCls:n,rtl:I,multiple:o,option:f,selected:!o&&f.isLeaf&&me(e.value,f.pathValue),icons:L,onMouseEnter:function(){f.disabled||e.expandTrigger==="hover"&&(W(f),!f.isLeaf&&$(f))},renderOption:V&&function(){return V(f._data,g)},onClickOption:function(){f.isLeaf&&o&&!f.disableCheckbox?w(f,!f._checked):p(f)},onMultipleChecked:function(ve){w(f,ve)},onDoubleClickOption:e.onDoubleClickOption})},f.value)}}),M&&S("div",{className:n+"-list-footer",onMouseDown:function(f){f.stopPropagation()},children:M})]}),g)})},g)})})},Vr=Or,be=globalThis&&globalThis.__assign||function(){return be=Object.assign||function(e){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},be.apply(this,arguments)},Ae=globalThis&&globalThis.__read||function(e,a){var l=typeof Symbol=="function"&&e[Symbol.iterator];if(!l)return e;var u=l.call(e),r,t=[],i;try{for(;(a===void 0||a-- >0)&&!(r=u.next()).done;)t.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}return t},Re=function(e,a){return e<0?a:e>a?0:e},xr=function(e,a,l){var u=a;if(re(a)){var r=a.toUpperCase().indexOf(e.toUpperCase());if(r>-1){var t=a.substr(0,r),i=a.substr(r+e.length);u=se(ce,{children:[t,S("span",{className:l+"-highlight",children:a.substr(r,e.length)}),i]})}}return u},Lr=function(e){var a,l=e.store,u=e.prefixCls,r=e.multiple,t=e.onChange,i=e.inputValue,n=e.renderEmpty,d=e.style,o=e.defaultActiveFirstOption,h=e.rtl,V=e.icons,R=e.value||[],j=Ae(O.exports.useState(l.searchNodeByLabel(i)||[]),2),_=j[0],I=j[1],L=O.exports.useRef(),k=O.exports.useRef(),C=er(),W=Ae(O.exports.useState(o?0:-1),2),b=W[0],B=W[1],$=function(p,w,T){if(T.stopPropagation(),!p.disabled)if(r){var x=Be(e.value,l,p,w);t&&t(x)}else t&&t([p.pathValue])};return le(function(){I(l.searchNodeByLabel(i))},[i,l]),le(function(){B(function(p){return p>_.length-1?o?0:-1:p})},[_]),O.exports.useEffect(function(){var p=e.getTriggerElement();if(!!p){var w=function(T){T.stopPropagation();var x=T.keyCode||T.which;switch(x){case Fe.code:return e.onEsc(),!1;case oe.code:case De.code:{k.current=!0;for(var H=oe.code===x?1:-1,A=Re(b+H,_.length-1);A!==b;){var c=_[A];if(c.disabled)A=Re(A+H,_.length-1);else break}return B(A),!1}case _e.code:var g=_[b];if(g){var v=R.some(function(y){return me(y,g.pathValue)});$(g,!v,T)}return!1}};return je(p,"keydown",w),function(){pe(p,"keydown",w)}}},[_,b,R]),O.exports.useEffect(function(){var p,w=L.current;w&&(k.current||C)&&rr(w,{behavior:"auto",block:"nearest",scrollMode:"if-needed",boundary:(p=w.parentNode)===null||p===void 0?void 0:p.parentNode})},[b,_]),L.current=null,_.length?S("div",{className:u+"-list-wrapper",children:S(Ie,{...be({needFiller:!1,wrapper:"ul",role:"menu",style:d,data:_,isStaticItemHeight:!0,threshold:e.virtualListProps?100:null},ae(e.virtualListProps)?e.virtualListProps:{},{onMouseMove:function(){k.current=!1},className:X(u+"-list",u+"-list-search",(a={},a[u+"-list-multiple"]=r,a[u+"-list-rtl"]=h,a))}),children:function(p,w){var T,x=p.getPathNodes(),H=x.map(function(v,y){return se("span",{children:[v.label,x.length===y+1?"":" / "]},v.label+"_"+v._level)}),A=p._checked,c={checked:A},g=G(e.renderOption)?e.renderOption(i,p._data,c):xr(i,H,u);return S("li",{title:re(g)?g:re(H)?H:void 0,role:"menuitem","aria-disabled":p.disabled,ref:function(v){w===b&&(L.current=v),A&&!L.current&&(L.current=v)},className:X(u+"-list-search-item",(T={},T[u+"-list-search-item-active"]=A,T[u+"-list-search-item-hover"]=w===b,T[u+"-list-search-item-disabled"]=p.disabled,T)),onClick:function(v){$(p,!A,v)},onMouseEnter:function(){!k.current&&!p.disabled&&B(w)},onMouseLeave:function(){!k.current&&!p.disabled&&B(o?0:-1)},children:S("div",{className:u+"-list-item-label",children:G(e.renderOption)?g:r?S(Me,{checked:A,disabled:p.disabled,children:g}):se(ce,{children:[g,A&&S("span",{className:u+"-check-icon",children:V.checked})]})})},w)}})}):S(ce,{children:n&&n()})},Er=Lr,Pr=globalThis&&globalThis.__read||function(e,a){var l=typeof Symbol=="function"&&e[Symbol.iterator];if(!l)return e;var u=l.call(e),r,t=[],i;try{for(;(a===void 0||a-- >0)&&!(r=u.next()).done;)t.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}return t},Tr=globalThis&&globalThis.__spreadArray||function(e,a,l){if(l||arguments.length===2)for(var u=0,r=a.length,t;u<r;u++)(t||!(u in a))&&(t||(t=Array.prototype.slice.call(a,0,u)),t[u]=a[u]);return e.concat(t||Array.prototype.slice.call(a))};function Ar(e,a){var l=O.exports.useRef(null),u=Ce();return l.current||(l.current=e()),le(function(){l.current=e(),u()},Tr([],Pr(a),!1)),l.current}var fe=globalThis&&globalThis.__assign||function(){return fe=Object.assign||function(e){for(var a,l=1,u=arguments.length;l<u;l++){a=arguments[l];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(this,arguments)},ge=globalThis&&globalThis.__read||function(e,a){var l=typeof Symbol=="function"&&e[Symbol.iterator];if(!l)return e;var u=l.call(e),r,t=[],i;try{for(;(a===void 0||a-- >0)&&!(r=u.next()).done;)t.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(l=u.return)&&l.call(u)}finally{if(i)throw i.error}}return t},$e={label:"label",value:"value",isLeaf:"isLeaf",children:"children",disabled:"disabled"},Rr={options:[],bordered:!0,fieldNames:$e,trigger:"click",expandTrigger:"click",checkedStrategy:Cr,defaultActiveFirstOption:!0},Mr={bottom:4};function Dr(e,a){var l=O.exports.useContext(nr),u=l.getPrefixCls,r=l.renderEmpty,t=l.componentConfig,i=l.rtl,n=tr(e,Rr,t==null?void 0:t.Cascader),d=n.disabled,o=n.renderFormat,h=n.getPopupContainer,V=n.children,R=n.triggerProps,j=n.expandTrigger,_=n.icons,I={loading:(_==null?void 0:_.loading)||S(ar,{}),checked:(_==null?void 0:_.checked)||S(ir,{}),next:(_==null?void 0:_.next)||(i?S(lr,{}):S(ur,{}))},L=u("cascader"),k=n.mode==="multiple",C=O.exports.useRef(null),W=Ce(),b=Ar(function(){return kr(n,ne("value"in n?n.value:n.defaultValue,k))},[JSON.stringify(He(n)),n.options]),B=ge(O.exports.useState(function(){return"value"in n?ne(n.value,k,b):"defaultValue"in n?ne(n.defaultValue,k,b):[]}),2),$=B[0],p=B[1],w="value"in n?ne(n.value,k,b):$,T=ge(Ne(!1,{value:n.popupVisible,defaultValue:n.defaultPopupVisible}),2),x=T[0],H=T[1],A=ge(Ne("",{value:"inputValue"in n?n.inputValue||"":void 0}),3),c=A[0],g=A[1],v=A[2],y=O.exports.useRef(c),F=O.exports.useRef(null),M=O.exports.useRef(null),f=O.exports.useRef((b==null?void 0:b.getCheckedNodes())||[]),z=or(L+"-popup-"),q=function(s,N){s!==y.current&&(g(s),y.current=s,F.current=N,n.onInputValueChange&&n.onInputValueChange(s,N))};O.exports.useEffect(function(){var s=F.current;v===c&&(s==="manual"||s==="optionListHide")&&n.onSearch&&n.onSearch(c,s),c!==y.current&&(y.current=c)},[c]),O.exports.useEffect(function(){var s=function(){clearTimeout(C.current),C.current=null};return!x&&c&&(C.current&&s(),C.current=setTimeout(function(){q("","optionListHide"),C.current=null},200)),function(){s()}},[x]),le(function(){if("value"in n&&n.value!==$){var s=ne(n.value,k);b.setNodeCheckedByValue(s),p(s)}},[n.value,k]),O.exports.useImperativeHandle(a,function(){return M.current},[]);var ve=function(s){f.current=Array.from(new Set([].concat(s,f.current)))},ke=function(s){var N=[],E=he(s),P=function(D){D.some(function(m){if(Z(E,m.pathValue)&&(N.push(m.getPathNodes().map(function(ee){return ee._data})),wr(E,m.pathValue)),!E.size)return!0})};return P(b.getCheckedNodes()),E.size&&P(f.current),N},K=O.exports.useCallback(function(s){s!==x&&(n.onVisibleChange&&n.onVisibleChange(s),"popupVisible"in n||H(s))},[n.onVisibleChange,x]),We=O.exports.useCallback(function(s){var N,E=ke([s])[0]||[],P,D=ye(s)?s.map(function(m){return String(m)}):[];return E.length&&(D=E.map(function(m){return m.label})),G(o)?P=o(D):D.every(function(m){return re(m)})?P=D.join(" / "):P=D.reduce(function(m,ee,J){return m.concat(J===0?[ee]:[" / ",ee])},[]),{text:P||"",disabled:(N=E[E.length-1])===null||N===void 0?void 0:N.disabled}},[b,$,o]),Y=function(s,N){var E;N==="panel"&&ae(n.showSearch)&&!n.showSearch.retainInputValueWhileSelect&&k&&q("","optionChecked");var P=n.onChange,D=n.changeOnSelect,m=n.expandTrigger,ee=w===s;if(!ee){k||b.setNodeCheckedByValue(s),ve(b.getCheckedNodes());var J=ke(s),qe=k?s:s[0],Je=k?J:J[0];k||(c||J[0]&&((E=J[0][J[0].length-1])===null||E===void 0?void 0:E.isLeaf)||D&&m==="hover")&&K(!1),"value"in n?(b.setNodeCheckedByValue(w),W()):p(s),P&&P(qe,Je,{dropdownVisible:x})}},ze=function(s,N,E){if(E.stopPropagation(),!s.disabled){var P=w.filter(function(D,m){return m!==N});b.setNodeCheckedByValue(P),Y(P)}},we=function(s){var N=s||M.current&&M.current.getWidth();return S("div",{className:L+"-list-empty",style:{width:N},children:n.notFoundContent||r("Cascader")})},Ke=function(){var s,N=ae(n.showSearch)?n.showSearch.panelMode:void 0,E=N===Ve.select?!0:N===Ve.cascader?!1:!G(n.onSearch)&&!!c,P=M.current&&M.current.getWidth(),D=G(n.dropdownRender)?n.dropdownRender:function(m){return m};return S("div",{id:z,className:X(L+"-popup",n.dropdownMenuClassName,(s={},s[L+"-popup-trigger-hover"]=n.expandTrigger==="hover",s)),children:D(S("div",{className:L+"-popup-inner",onMouseDown:function(m){return m.preventDefault()},children:E?S(Er,{style:{minWidth:P},store:b,inputValue:c,renderEmpty:function(){return we(P)},multiple:k,onChange:function(m){Y(m,"panel")},prefixCls:L,rtl:i,onEsc:function(){K(!1)},renderOption:ae(n.showSearch)&&n.showSearch.renderOption||void 0,getTriggerElement:function(){var m;return(m=M.current)===null||m===void 0?void 0:m.dom},value:w,virtualListProps:n.virtualListProps,defaultActiveFirstOption:n.defaultActiveFirstOption,icons:I}):S(Vr,{dropdownMenuColumnStyle:n.dropdownMenuColumnStyle,virtualListProps:n.virtualListProps,expandTrigger:j,store:b,dropdownColumnRender:n.dropdownColumnRender,renderOption:n.renderOption,changeOnSelect:n.changeOnSelect,showEmptyChildren:n.showEmptyChildren||!!n.loadMore,multiple:k,onChange:function(m){Y(m,"panel")},loadMore:n.loadMore,prefixCls:L,rtl:i,getTriggerElement:function(){var m;return(m=M.current)===null||m===void 0?void 0:m.dom},renderEmpty:we,popupVisible:x,value:w,renderFooter:n.renderFooter,icons:I,onEsc:function(){K(!1)},onDoubleClickOption:function(){n.changeOnSelect&&!k&&K(!1)}})}))})},Ge=function(s){Y(s)},Se=function(s){return S(dr,{...fe({popup:Ke,trigger:n.trigger,disabled:d,getPopupContainer:h,position:i?"br":"bl",classNames:"slideDynamicOrigin",popupAlign:Mr,unmountOnExit:"unmountOnExit"in n?n.unmountOnExit:!G(n.loadMore),popupVisible:x},R,{onVisibleChange:K}),children:s})};return V?Se(V):S(cr,{...fe({},n,{ref:M,ariaControls:z,popupVisible:x,value:k?w:w&&w[0],inputValue:c,rtl:i,isEmptyValue:_r(w),prefixCls:L,isMultiple:k,renderText:We,onRemoveCheckedItem:ze,onSort:Ge,renderView:Se,onClear:function(s){var N;if(s.stopPropagation(),!k)Y([]);else{var E=b.getCheckedNodes(),P=E.filter(function(D){return D.disabled}).map(function(D){return D.pathValue});b.setNodeCheckedByValue(P),Y(P)}(N=n.onClear)===null||N===void 0||N.call(n,!!x)},onKeyDown:function(s){var N;if(!d){s.stopPropagation();var E=s.keyCode||s.which;E===_e.code&&!x&&(K(!0),s.preventDefault()),E===sr.code&&x&&K(!1),(N=n.onKeyDown)===null||N===void 0||N.call(n,s)}},onChangeInputValue:function(s){q(s,"manual"),x||K(!0)}})})}var Ue=O.exports.forwardRef(Dr);Ue.displayName="Cascader";var jr=Ue;export{jr as C};
