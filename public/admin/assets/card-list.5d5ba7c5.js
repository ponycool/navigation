import{u as g,r as d,j as t,E as C,a as o,b9 as S,S as T,q as D,m as k}from"./index.42bb498c.js";import{S as w}from"./index.cebe251e.js";import{C as L}from"./index.9dee83a4.js";import{S as N}from"./index.11b24e7c.js";import{C as f,L as I,T as y,I as b}from"./index.fcbaf850.js";import{l as F}from"./index.b0c339fc.js";import{I as R,a as j,b as A}from"./index.eca74eea.js";import"./b-tween.es.064e2a03.js";import"./pad.a7ae124b.js";const G="_card_82vdc_1",q="_statistic_82vdc_1",E="_title_82vdc_4",P="_diff_82vdc_16",$="_tooltip_82vdc_24";var n={card:G,statistic:q,title:E,diff:P,"diff-increment":"_diff-increment_82vdc_21",tooltip:$};const{Row:B,Col:M}=C,{Title:z,Text:H}=k,_={pure:!0,autoFit:!0,height:80,padding:[0,10,0,10]};function v(a){const{items:r}=a;return t("div",{className:n.tooltip,children:r.map((s,i)=>t("div",{children:t(H,{bold:!0,children:Number(s.data.y).toLocaleString()})},i))})}function J(a){const{chartData:r}=a;return o(f,{data:r,..._,children:[t(I,{position:"x*y",shape:["name",["smooth","dash"]],color:["name",["#165DFF","rgba(106,161,255,0.3)"]]}),t(y,{shared:!1,showCrosshairs:!0,children:(s,i)=>t(v,{items:i})})]})}function K(a){const{chartData:r}=a;return o(f,{data:r,..._,children:[t(b,{position:"x*y",color:["x",s=>Number(s)%2===0?"#86DF6C":"#468DFF"]}),t(y,{shared:!1,children:(s,i)=>t(v,{items:i})}),t(A,{type:"active-region"})]})}function O(a){const{chartType:r,title:s,count:i,increment:c,diff:p,chartData:l,loading:e}=a;return o(L,{className:n.card,children:[t("div",{className:n.statistic,children:t(N,{title:t(z,{heading:6,className:n.title,children:s}),loading:e,value:i,extra:t("div",{className:n["compare-yesterday"],children:e?t(w,{text:{rows:1},style:{width:"100px"},animation:!0}):o("span",{className:S(n.diff,{[n["diff-increment"]]:c}),children:[p,c?t(R,{}):t(j,{})]})}),groupSeparator:!0})}),t("div",{className:n.chart,children:o(T,{style:{width:"100%"},loading:e,children:[r==="interval"&&t(K,{chartData:l}),r==="line"&&t(J,{chartData:l})]})})]})}const h=[{key:"userRetentionTrend",type:"line"},{key:"userRetention",type:"interval"},{key:"contentConsumptionTrend",type:"line"},{key:"contentConsumption",type:"interval"}];function at(){const a=g(F),[r,s]=d.exports.useState(!1),[i,c]=d.exports.useState(h.map(e=>({...e,chartType:e.type}))),p=async()=>{const e=h.map(async u=>{const{data:x}=await D.get(`/api/multi-dimension/card?type=${u.type}`).catch(()=>({data:{}}));return{...x,key:u.key,chartType:u.type}});s(!0);const m=await Promise.all(e).finally(()=>s(!1));c(m)};d.exports.useEffect(()=>{p()},[]);const l=d.exports.useMemo(()=>i.map(e=>({...e,title:a[`multiDAnalysis.cardList.${e.key}`]})),[a,i]);return t(B,{gutter:16,children:l.map((e,m)=>t(M,{span:6,children:t(O,{...e,loading:r})},m))})}export{at as default};
