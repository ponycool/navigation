import{aO as m,r as t,a as u,x as y,j as a,aQ as g,B as r,aj as h}from"./index.6bfcbf90.js";import{C as D}from"./index.a3cd06af.js";import{I as L}from"./index.a78b22da.js";function E(n){return m({url:"/log/run",method:"post",data:n})}function k(){return m({url:"/log/run/clear",method:"post"})}function B(){const[n,C]=t.exports.useState([]),[s,i]=t.exports.useState(!1),[c,d]=t.exports.useState(!1),[p,x]=t.exports.useState(10),[f,b]=t.exports.useState(50),o=()=>{i(!0),E({line:f}).then(e=>{const l=e.data.list;C(l||[]),i(!1)})},v=async()=>{d(!0);try{(await k()).data.code===0&&o()}finally{d(!1)}};return t.exports.useEffect(()=>{o();const e=setInterval(()=>{o()},p*1e3);return()=>{clearInterval(e)}},[p,f]),u(D,{children:[u(y,{children:[a(g,{prefix:"\u5237\u65B0\u65F6\u95F4",placeholder:"\u9009\u62E9\u5237\u65B0\u65F6\u95F4",options:[{label:"3\u79D2",value:3},{label:"5\u79D2",value:5},{label:"10\u79D2",value:10},{label:"30\u79D2",value:30},{label:"60\u79D2",value:60}],defaultValue:10,onChange:x},"autoRefreshTime"),a(g,{prefix:"\u65E5\u5FD7\u884C\u6570",placeholder:"\u9009\u62E9\u65E5\u5FD7\u663E\u793A\u884C\u6570",options:[{label:"5\u884C",value:5},{label:"10\u884C",value:10},{label:"20\u884C",value:20},{label:"50\u884C",value:50},{label:"100\u884C",value:100}],defaultValue:50,allowClear:!0,onChange:b},"line"),a(r,{type:"primary",icon:s?a(h,{}):null,disabled:s,onClick:o,children:"\u5237\u65B0"},"refresh"),u(r,{type:"primary",icon:c?a(h,{}):null,disabled:c,onClick:v,children:[a(L,{}),"\u6E05\u7A7A\u65E5\u5FD7"]},"refresh"),a(r,{type:"primary",onClick:()=>{const e=document.createElement("a"),l=localStorage.getItem("token");e.href=`/api/log/run/download?token=${l}`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"\u65E5\u5FD7\u4E0B\u8F7D"},"download")]}),a("ol",{style:{marginTop:"10px",height:"70vh",overflow:"auto",backgroundColor:"#f5f5f5",padding:"0"},children:n.map((e,l)=>u("li",{style:{listStyle:"none"},children:[u("span",{children:[l+1,"\xA0\xA0\xA0\xA0"]}),e]},l))})]})}export{B as default};
