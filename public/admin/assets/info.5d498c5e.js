import{u as N,y as l,r as u,G as C,a as h,j as a,z as m,x as F,B as S,M as f}from"./index.6bfcbf90.js";import{S as v}from"./index.6277430c.js";import{l as w}from"./index.4c48b631.js";import{a as z}from"./index.ac545359.js";function R({userInfo:s={},loading:r}){const e=N(w),[n]=l.useForm(),[x,d]=u.exports.useState(!1),{lang:p}=u.exports.useContext(C),b=async()=>{n.validate().then(async t=>{d(!0);const{accountName:c,nickname:g,email:y}=t,o=await z({uuid:s.list[0].uuid,accountName:c,nickname:g,email:y});o.data.code===0?f.success(o.data.message):f.error(o.data.message)}).catch(t=>{console.log(t)}).finally(()=>{d(!1)})},k=()=>{n.setFieldsValue({...s,accountName:s.account_name})},i=(t=1)=>a(v,{text:{rows:t,width:new Array(t).fill("100%")},animation:!0});return u.exports.useEffect(()=>{n.setFieldsValue({...s.list[0],accountName:s.list[0].account_name})},[]),h(l,{style:{width:"500px",marginTop:"6px"},form:n,labelCol:{span:p==="en-US"?7:6},wrapperCol:{span:p==="en-US"?17:18},children:[a(l.Item,{label:e["userSetting.accountName"],field:"accountName",rules:[{required:!0,message:e["userSetting.accountName.placeholder"]}],children:r?i:a(m,{placeholder:e["userSetting.accountName.placeholder"]})}),a(l.Item,{label:e["userSetting.nickname"],field:"nickname",rules:[{required:!0,message:e["userSetting.nickname.placeholder"]}],children:r?i:a(m,{placeholder:e["userSetting.nickname.placeholder"]})}),a(l.Item,{label:e["userSetting.email"],field:"email",rules:[{required:!0,message:e["userSetting.email.placeholder"]},{validator(t,c){/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)||c(e["userSetting.email.error"])}}],children:r?i:a(m,{placeholder:e["userSetting.email.placeholder"]})}),a(l.Item,{label:" ",children:h(F,{children:[a(S,{loading:x,type:"primary",onClick:b,children:e["userSetting.save"]}),a(S,{onClick:k,children:e["userSetting.reset"]})]})})]})}export{R as default};
